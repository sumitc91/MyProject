<div style="background-color: rgb(246, 246, 246);" ng-controller="beforeLoginViewPostDetail">

    <div class="row" style="min-height: 150px;"></div>
    <div class="container">
       
        <section class="profile-env">

            <div class="col-md-12">                
                <div class="col-md-12 col-sm-12 col-xs-12 col-right">
                    
                    <div class="row">
                        <!-- posts -->
                        <div>
                            <section class="panel" ng-repeat="post in UserPostList">
                                <div>
                                    <a href="#/userprofile/{{post.userInfo[0]._id}}"><span ng-bind="post.userInfo[0].FirstName+' '+post.userInfo[0].LastName"></span></a> Posted on  <a href="#/userprofile/{{post.postedToUser[0]._id}}"><span ng-bind="post.postedToUser[0].FirstName+' '+post.postedToUser[0].LastName"></span></a>'s Wall
                                </div>
                                <div class="panel-body">
                                    <div class="fb-user-thumb">
                                        <img ng-src="{{post.userInfo[0].ImageUrl}}" alt="">
                                    </div>
                                    <div class="fb-user-details hover_div">
                                        <h3><a href="#/userprofile/{{post.userInfo[0]._id}}" user_name="{{post.userInfo[0].Username}}" class="show_hovercard" name="{{post.userInfo[0].FirstName +' ' + post.userInfo[0].LastName}}" profile_pic="{{post.userInfo[0].ImageUrl}}" cover_pic="{{post.userInfo[0].CoverImageUrl}}" ng-bind="post.userInfo[0].FirstName +' ' + post.userInfo[0].LastName"></a></h3>
                                        <p>{{post.postInfo.PostedTime| timeago}} near Alaska, USA</p>
                                        <div class="floatRight">
                                            <!-- Single button using append-to-body -->
                                            <div class="btn-group" uib-dropdown dropdown-append-to-body>
                                                <button id="btn-append-to-body" type="button" class="btn btn-warning" uib-dropdown-toggle>
                                                    <span class="caret"></span>
                                                </button>
                                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-body">
                                                    <li role="menuitem"><a ng-click="enableEditOnUserPost($index)" >Edit</a></li>
                                                    <li role="menuitem"><a href="">Delete</a></li>
                                                    <li class="divider"></li>
                                                    <li role="menuitem"><a href="">Mark Spam</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                    <p class="fb-user-status" ng-bind="post.postInfo.PostMessage" ng-show="!post.postInfo.editableMode">
                                    </p>
                                    <img ng-show="post.postInfo.loadingIcon" src="../../App/img/loading/loading123.gif" style="height: 20px; float: right; margin: 10px 0px 0px;" />
                                    <!--<textarea rows="4" cols="50" ng-bind="post.postInfo.PostMessage" ng-show="post.postInfo.editableMode"></textarea>-->
                                    <input ng-show="post.postInfo.editableMode" ng-model="post.postInfo.PostMessage" ng-keyup="$event.keyCode == 13 && editCommentOnUserPost($index)" placeholder="Edit Post" type="text">
                                    <div class="post-image">
                                        <a class="fancybox" rel="group" href="{{post.postInfo.PostImage}}"><img class="image show-in-modal" ng-src="{{post.postInfo.PostImage}}" alt="" style="max-height:400px"/></a>
                                        <!--<img ng-src="{{post.postInfo.PostImage}}" class="image show-in-modal" alt="image post">-->
                                    </div>
                                    <div class="editable-buttons" ng-show="post.postInfo.editableMode"><button type="button" ng-click="submitEditOnUserPost($index)" class="btn btn-primary btn-sm"><i class="glyphicon glyphicon-ok"></i></button><button type="button" ng-click="cancelEditOnUserPost($index)" class="btn btn-default btn-sm"><i class="glyphicon glyphicon-remove"></i></button></div>
                                    <div class="fb-status-container fb-border">
                                        <div class="fb-time-action">
                                            <a title="Like this" ng-show="!post.alreadyLiked" ng-click="reactionOnUserPost($index)">Like</a>
                                            <a title="Unlike this" ng-show="post.alreadyLiked" ng-click="removeReactionOnUserPost($index)">Unlike</a>
                                            <span>-</span>
                                            <a href="#" title="Leave a comment">Comments</a>
                                            <span>-</span>
                                            <a href="#" title="Send this to friend or post it on your time line">Share</a>
                                        </div>
                                    </div>

                                    <div class="fb-status-container fb-border fb-gray-bg">
                                        <div class="fb-time-action like-info">
                                            <span class="hover_div"><a class="like-summary" ng-click="showLikedByUsers(post.postInfo._id)" data-toggle="modal" data-target="#showLikedByUsersModal" ng-bind-html="post.likeInfoHtml | html"></a></span>
                                        </div>
                                        <ul class="fb-comments">
                                            <li>
                                                <div class="input-group"> <a ng-click="loadMoreMessage(post.postInfo._id,$index)">Load Previous Messages..<span ng-show='post.loadingIcon'> <img src="../../App/img/loading/loading123.gif" style="height: 30px; margin: 10px 0px 0px;" /></span></a></div>
                                            </li>
                                            <li ng-repeat="comment in post.commentsInfo">
                                                <a href="#/userprofile/{{comment.commentedBy[0]._id}}" class="cmt-thumb">
                                                    <img ng-src="{{comment.commentedBy[0].ImageUrl}}" alt="">
                                                </a>
                                                <div class="cmt-details">
                                                    <span class="comment-user-name hover_div"><a href="#/userprofile/{{comment.commentedBy[0]._id}}" user_name="{{comment.commentedBy[0].Username}}" class="comment-user-name show_hovercard" name="{{comment.commentedBy[0].FirstName +' ' + comment.commentedBy[0].LastName}}" profile_pic="{{comment.commentedBy[0].ImageUrl}}" cover_pic="{{comment.commentedBy[0].CoverImageUrl}}" ng-bind="comment.commentedBy[0].FirstName +' ' + comment.commentedBy[0].LastName"></a></span>
                                                    <span ng-bind="comment.commentInfo.PostMessage" ng-show="!comment.editableMode"></span>
                                                    <div ng-show="comment.editableMode">
                                                        <input ng-model="comment.commentInfo.PostMessage" ng-keyup="$event.keyCode == 13 && editCommentOnUserPost($index)" placeholder="Edit comment" type="text">
                                                        <div class="editable-buttons"><button type="button" ng-click="submitEditcommentOnUserPost($parent.$index,$index)" class="btn btn-primary btn-sm"><i class="glyphicon glyphicon-ok"></i></button><button type="button" ng-click="cancelEditcommentOnUserPost($parent.$index,$index)" class="btn btn-default btn-sm"><i class="glyphicon glyphicon-remove"></i></button></div>
                                                    </div>
                                                    <img ng-show="comment.loadingIcon" src="../../App/img/loading/loading123.gif" style="height: 20px; float: right; margin: 10px 0px 0px;" />
                                                    <p>
                                                        {{comment.commentInfo.PostedTime | timeago}} -
                                                        <a href="" class="like-link">Like</a> &nbsp;<a ng-click="enableEditcommentOnUserPost($parent.$index,$index)" ng-show="!comment.editableMode && comment.isAuthenticToEdit" class="like-link">Edit</a> &nbsp;<a href="" class="like-link" ng-show="comment.isAuthenticToEdit || comment.isLoggedInUserWall">Delete</a>
                                                    </p>
                                                </div>
                                            </li>  
                                            <li>
                                                <a class="cmt-thumb">
                                                    <img ng-src="{{clientDetailResponse.Profilepic}}" alt="">
                                                </a>
                                                <div class="cmt-form">
                                                    <div class="input-group"><input class="form-control" ng-model="post.postInfo.postUserComment" ng-keyup="$event.keyCode == 13 && commentOnUserPost($index)" placeholder="Add a comment" type="text" ng-disabled="post.commentsInfo[0].disableInputBox"> <span class="input-group-addon"><a ng-click="commentOnUserPost($index)"><i class="fa fa-edit"></i></a></span></div>
                                                </div>
                                            </li>
                                        </ul>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </section>
                            <div ng-show='UserPostListInfoAngular.busy'>Loading data... <img src="../../App/img/loading/loading123.gif" style="height: 30px; margin: 10px 0px 0px;" /></div>
                            <!-- Modal -->
                            <div class="modal fade" id="showLikedByUsersModal" role="dialog">
                                <div class="modal-dialog">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h4 class="modal-title">Liked By :</h4>
                                        </div>
                                        <div class="modal-body">
                                            <div ng-show='UserPostLikesLoading'>Loading data... <img src="../../App/img/loading/loading123.gif" style="height: 30px; margin: 10px 0px 0px;" /></div>
                                            <div ng-repeat="like in UserPostLikes">
                                                <a ng-click="closeModelAndNavigateTo(like.likeInfo._id)">
                                                    <img class="img-circle" style="max-height: 40px; max-width: 40px;" ng-src="{{like.likeInfo.ImageUrl}}"> &nbsp;
                                                    <span ng-bind="like.likeInfo.FirstName"></span>&nbsp; <span ng-bind="like.likeInfo.LastName"></span>
                                                    <!--<span user_name="{{like.likeInfo.Username}}" class="show_hovercard" name="{{like.likeInfo.FirstName +' ' + like.likeInfo.LastName}}" profile_pic="{{like.likeInfo.ImageUrl}}" cover_pic="{{like.likeInfo.CoverImageUrl}}" ng-bind="like.likeInfo.FirstName +' ' + like.likeInfo.LastName"></span>-->
                                                </a>
                                                <hr />
                                            </div>

                                            <p><a class="like-summary" ng-click="showMoreLikedByUsers()">Load More..</a></p>
                                        </div>
                                        <div class="modal-footer">
                                            <button id="closeModalId" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </section>
    </div>


</div>


<script type="text/javascript">
	$(document).ready(function() {
		$(".fancybox").fancybox();
	});
</script>